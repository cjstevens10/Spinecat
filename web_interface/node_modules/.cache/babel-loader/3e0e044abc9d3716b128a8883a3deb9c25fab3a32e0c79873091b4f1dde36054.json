{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\coope\\\\CursorWorkspace\\\\Spinecat\\\\web_interface\\\\src\\\\components\\\\SpineVisualizer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { motion } from 'framer-motion';\nimport { BookOpen, AlertCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SpineVisualizer = ({\n  imageUrl,\n  spineRegions,\n  bookMatches,\n  selectedSpineId,\n  onSpineSelected,\n  isFinalized\n}) => {\n  _s();\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const [hoveredSpineId, setHoveredSpineId] = useState(null);\n  const imageRef = useRef(null);\n  const containerRef = useRef(null);\n\n  // Get book match for a spine region\n  const getBookForSpine = spineId => {\n    return bookMatches.find(book => book.spine_region_id === spineId);\n  };\n\n  // Get spine region by ID\n  const getSpineRegion = spineId => {\n    return spineRegions.find(spine => spine.id === spineId);\n  };\n\n  // Handle spine region click\n  const handleSpineClick = spineId => {\n    onSpineSelected(spineId);\n  };\n\n  // Handle spine region hover\n  const handleSpineHover = spineId => {\n    setHoveredSpineId(spineId);\n  };\n\n  // Calculate spine region styles\n  const getSpineStyles = spine => {\n    const book = getBookForSpine(spine.id);\n    const isSelected = selectedSpineId === spine.id;\n    const isHovered = hoveredSpineId === spine.id;\n    let baseClasses = 'spine-region';\n    if (isSelected) baseClasses += ' selected';\n    if (isHovered) baseClasses += ' hovered';\n    const transform = `rotate(${spine.rotation}deg)`;\n    return {\n      className: baseClasses,\n      style: {\n        left: `${spine.x}px`,\n        top: `${spine.y}px`,\n        width: `${spine.width}px`,\n        height: `${spine.height}px`,\n        transform,\n        zIndex: isSelected ? 10 : isHovered ? 5 : 1\n      }\n    };\n  };\n\n  // Render spine region\n  const renderSpineRegion = spine => {\n    const book = getBookForSpine(spine.id);\n    const styles = getSpineStyles(spine);\n    const spineNumber = spineRegions.findIndex(s => s.id === spine.id) + 1;\n    return /*#__PURE__*/_jsxDEV(motion.div, {\n      className: styles.className,\n      style: styles.style,\n      onClick: () => handleSpineClick(spine.id),\n      onMouseEnter: () => handleSpineHover(spine.id),\n      onMouseLeave: () => handleSpineHover(null),\n      whileHover: {\n        scale: 1.02\n      },\n      whileTap: {\n        scale: 0.98\n      },\n      initial: {\n        opacity: 0,\n        scale: 0.8\n      },\n      animate: {\n        opacity: 1,\n        scale: 1\n      },\n      transition: {\n        duration: 0.2\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spine-label\",\n        children: spineNumber\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute -bottom-6 left-0 text-xs text-gray-600\",\n        children: [Math.round(spine.confidence * 100), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), hoveredSpineId === spine.id && book && /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"absolute -top-16 left-0 bg-gray-900 text-white text-sm px-3 py-2 rounded-lg shadow-lg whitespace-nowrap z-20\",\n        initial: {\n          opacity: 0,\n          y: 5\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          duration: 0.2\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-medium\",\n          children: book.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-300 text-xs\",\n          children: [\"by \", book.author_name.join(', ')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), book.first_publish_year && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-300 text-xs\",\n          children: book.first_publish_year\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this)]\n    }, spine.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card p-0 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 border-b border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-gray-900 mb-2\",\n        children: \"Book Spine Detection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-600\",\n        children: [spineRegions.length, \" spine\", spineRegions.length !== 1 ? 's' : '', \" detected\", bookMatches.length > 0 && ` • ${bookMatches.length} book${bookMatches.length !== 1 ? 's' : ''} identified`]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"relative bg-gray-100 min-h-[400px] flex items-center justify-center\",\n      children: [!imageLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n          className: \"w-12 h-12 mx-auto mb-2 text-gray-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading image...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        ref: imageRef,\n        src: imageUrl,\n        alt: \"Book spines\",\n        className: \"max-w-full max-h-[600px] object-contain\",\n        onLoad: () => setImageLoaded(true),\n        onError: () => setImageLoaded(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), imageLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 pointer-events-none\",\n        children: spineRegions.map(renderSpineRegion)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this), imageLoaded && spineRegions.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-gray-500\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"w-12 h-12 mx-auto mb-2 text-gray-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-medium\",\n            children: \"No book spines detected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm\",\n            children: \"Try uploading a clearer image with better lighting\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), spineRegions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-gray-50 border-t border-gray-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between text-sm text-gray-600\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-3 h-3 bg-primary-500 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Detected spine\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-3 h-3 bg-primary-600 rounded ring-2 ring-primary-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Selected\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs\",\n          children: \"Click on spine regions to select books\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n};\n_s(SpineVisualizer, \"jCUHNy/34xulpyMx0Re/ANZh7Ic=\");\n_c = SpineVisualizer;\nexport default SpineVisualizer;\nvar _c;\n$RefreshReg$(_c, \"SpineVisualizer\");","map":{"version":3,"names":["React","useState","useRef","motion","BookOpen","AlertCircle","jsxDEV","_jsxDEV","SpineVisualizer","imageUrl","spineRegions","bookMatches","selectedSpineId","onSpineSelected","isFinalized","_s","imageLoaded","setImageLoaded","hoveredSpineId","setHoveredSpineId","imageRef","containerRef","getBookForSpine","spineId","find","book","spine_region_id","getSpineRegion","spine","id","handleSpineClick","handleSpineHover","getSpineStyles","isSelected","isHovered","baseClasses","transform","rotation","className","style","left","x","top","y","width","height","zIndex","renderSpineRegion","styles","spineNumber","findIndex","s","div","onClick","onMouseEnter","onMouseLeave","whileHover","scale","whileTap","initial","opacity","animate","transition","duration","children","fileName","_jsxFileName","lineNumber","columnNumber","Math","round","confidence","title","author_name","join","first_publish_year","length","ref","src","alt","onLoad","onError","map","_c","$RefreshReg$"],"sources":["C:/Users/coope/CursorWorkspace/Spinecat/web_interface/src/components/SpineVisualizer.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { BookOpen, AlertCircle } from 'lucide-react';\r\n\r\nimport { SpineRegion, BookMatch } from '../types';\r\n\r\ninterface SpineVisualizerProps {\r\n  imageUrl: string;\r\n  spineRegions: SpineRegion[];\r\n  bookMatches: BookMatch[];\r\n  selectedSpineId: string | null;\r\n  onSpineSelected: (spineId: string) => void;\r\n  isFinalized: boolean;\r\n}\r\n\r\nconst SpineVisualizer: React.FC<SpineVisualizerProps> = ({\r\n  imageUrl,\r\n  spineRegions,\r\n  bookMatches,\r\n  selectedSpineId,\r\n  onSpineSelected,\r\n  isFinalized\r\n}) => {\r\n  const [imageLoaded, setImageLoaded] = useState(false);\r\n  const [hoveredSpineId, setHoveredSpineId] = useState<string | null>(null);\r\n  const imageRef = useRef<HTMLImageElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Get book match for a spine region\r\n  const getBookForSpine = (spineId: string): BookMatch | undefined => {\r\n    return bookMatches.find(book => book.spine_region_id === spineId);\r\n  };\r\n\r\n  // Get spine region by ID\r\n  const getSpineRegion = (spineId: string): SpineRegion | undefined => {\r\n    return spineRegions.find(spine => spine.id === spineId);\r\n  };\r\n\r\n  // Handle spine region click\r\n  const handleSpineClick = (spineId: string) => {\r\n    onSpineSelected(spineId);\r\n  };\r\n\r\n  // Handle spine region hover\r\n  const handleSpineHover = (spineId: string | null) => {\r\n    setHoveredSpineId(spineId);\r\n  };\r\n\r\n  // Calculate spine region styles\r\n  const getSpineStyles = (spine: SpineRegion) => {\r\n    const book = getBookForSpine(spine.id);\r\n    const isSelected = selectedSpineId === spine.id;\r\n    const isHovered = hoveredSpineId === spine.id;\r\n\r\n    let baseClasses = 'spine-region';\r\n    if (isSelected) baseClasses += ' selected';\r\n    if (isHovered) baseClasses += ' hovered';\r\n\r\n    const transform = `rotate(${spine.rotation}deg)`;\r\n\r\n    return {\r\n      className: baseClasses,\r\n      style: {\r\n        left: `${spine.x}px`,\r\n        top: `${spine.y}px`,\r\n        width: `${spine.width}px`,\r\n        height: `${spine.height}px`,\r\n        transform,\r\n        zIndex: isSelected ? 10 : isHovered ? 5 : 1\r\n      }\r\n    };\r\n  };\r\n\r\n  // Render spine region\r\n  const renderSpineRegion = (spine: SpineRegion) => {\r\n    const book = getBookForSpine(spine.id);\r\n    const styles = getSpineStyles(spine);\r\n    const spineNumber = spineRegions.findIndex(s => s.id === spine.id) + 1;\r\n\r\n    return (\r\n      <motion.div\r\n        key={spine.id}\r\n        className={styles.className}\r\n        style={styles.style}\r\n        onClick={() => handleSpineClick(spine.id)}\r\n        onMouseEnter={() => handleSpineHover(spine.id)}\r\n        onMouseLeave={() => handleSpineHover(null)}\r\n        whileHover={{ scale: 1.02 }}\r\n        whileTap={{ scale: 0.98 }}\r\n        initial={{ opacity: 0, scale: 0.8 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        transition={{ duration: 0.2 }}\r\n      >\r\n        {/* Spine Number Label */}\r\n        <div className=\"spine-label\">\r\n          {spineNumber}\r\n        </div>\r\n\r\n        {/* Confidence Indicator */}\r\n        <div className=\"absolute -bottom-6 left-0 text-xs text-gray-600\">\r\n          {Math.round(spine.confidence * 100)}%\r\n        </div>\r\n\r\n        {/* Hover Tooltip */}\r\n        {hoveredSpineId === spine.id && book && (\r\n          <motion.div\r\n            className=\"absolute -top-16 left-0 bg-gray-900 text-white text-sm px-3 py-2 rounded-lg shadow-lg whitespace-nowrap z-20\"\r\n            initial={{ opacity: 0, y: 5 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.2 }}\r\n          >\r\n            <div className=\"font-medium\">{book.title}</div>\r\n            <div className=\"text-gray-300 text-xs\">\r\n              by {book.author_name.join(', ')}\r\n            </div>\r\n            {book.first_publish_year && (\r\n              <div className=\"text-gray-300 text-xs\">\r\n                {book.first_publish_year}\r\n              </div>\r\n            )}\r\n            <div className=\"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900\"></div>\r\n          </motion.div>\r\n        )}\r\n      </motion.div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"card p-0 overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"p-6 border-b border-gray-200\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n          Book Spine Detection\r\n        </h3>\r\n        <p className=\"text-sm text-gray-600\">\r\n          {spineRegions.length} spine{spineRegions.length !== 1 ? 's' : ''} detected\r\n          {bookMatches.length > 0 && ` • ${bookMatches.length} book${bookMatches.length !== 1 ? 's' : ''} identified`}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Image Container */}\r\n      <div \r\n        ref={containerRef}\r\n        className=\"relative bg-gray-100 min-h-[400px] flex items-center justify-center\"\r\n      >\r\n        {!imageLoaded && (\r\n          <div className=\"text-center text-gray-500\">\r\n            <BookOpen className=\"w-12 h-12 mx-auto mb-2 text-gray-400\" />\r\n            <p>Loading image...</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Main Image */}\r\n        <img\r\n          ref={imageRef}\r\n          src={imageUrl}\r\n          alt=\"Book spines\"\r\n          className=\"max-w-full max-h-[600px] object-contain\"\r\n          onLoad={() => setImageLoaded(true)}\r\n          onError={() => setImageLoaded(false)}\r\n        />\r\n\r\n        {/* Spine Regions Overlay */}\r\n        {imageLoaded && (\r\n          <div className=\"absolute inset-0 pointer-events-none\">\r\n            {spineRegions.map(renderSpineRegion)}\r\n          </div>\r\n        )}\r\n\r\n        {/* No Spines Detected */}\r\n        {imageLoaded && spineRegions.length === 0 && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90\">\r\n            <div className=\"text-center text-gray-500\">\r\n              <AlertCircle className=\"w-12 h-12 mx-auto mb-2 text-gray-400\" />\r\n              <p className=\"text-lg font-medium\">No book spines detected</p>\r\n              <p className=\"text-sm\">Try uploading a clearer image with better lighting</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Legend */}\r\n      {spineRegions.length > 0 && (\r\n        <div className=\"p-4 bg-gray-50 border-t border-gray-200\">\r\n          <div className=\"flex items-center justify-between text-sm text-gray-600\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-3 h-3 bg-primary-500 rounded\"></div>\r\n                <span>Detected spine</span>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-3 h-3 bg-primary-600 rounded ring-2 ring-primary-400\"></div>\r\n                <span>Selected</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"text-xs\">\r\n              Click on spine regions to select books\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SpineVisualizer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}